## При разработке механизма обмена данных BACKEND <--> FRONTEND, часто требуется "упаковывать"/"распаковывать" данные а так же их отфилтровывать



---
* У нас есть источник данных в бэкенде (типо база данных) в виде файла "backend/data.json" с такими данными (история оплаты со стороны разных клиентов с терминалов):
  ```json
  {
     "data": [
       {
         "client_id": 1,
         "amount": 100.00,
         "date": "2021-01-01",
         "method": "paypal"
       },
       {
         "client_id": 2,
         "amount": 50.00,
         "date": "2021-01-02",
         "method": "paypal"
       },
       {
         "client_id": 1,
         "amount": 200.00,
         "date": "2021-01-03",
         "method": "visa"
       },   
       {
         "client_id": 2,
         "amount": 100.00,
         "date": "2021-01-04",
         "method": "visa"
       }        
     ]
  }
  ```
* Предположим у нас есть модуль "backend/ServiceDataEndpoint" класс/модуль задача которого "отдавать" данные каждый раз когда поступает запрос с фронта:
  ```js
  class ServiceDataEndpoint {
      
      constructor( accessKey, pathToData ) {
        ...
      }
      
      onRequest( params ) {
        ...
      }
  }
  ```
  - где **constructor** получит два значения которые "установят" в этот бэкенд сервис правильный ключ доступа и путь до файла с данными
  - где метод **onRequest** будет выполняться каждый раз когда входит запрос в бэкенд
  - где **params** - строка (string) с параметрами URL - передающимися со стороны клиента, напр  "?key=123&date=2021-01-01&client_id=1" - способ упаковки таким форматом параметров чаще всего называется "URL querystring"
   
* Представим себе так же как должен срабатывать бэкенд при его использовании в "server.js":
  ```js
  const Service = require('./backend/ServiceDataEndpoint')
  service = new Service("123","./backend/data.json")
  
  // 
  response = service.onRequest("?key=123")
  console.log(response) // { status: 200, message: "ok", data: [ { client_id: 1, ... } ] }
  ```
  - как можно увидеть - после подключения модуля сервиса, мы создаем объект и настраиваем его на правильный ключ и источник данных
  - так же, ниже мы тестируем что выдаст наш бэкенд в случае если попадает запрос с строкой "?key=123"  - где параметер "key" содержит правильный ключ доступа

* ТРЕБУЕТСЯ дописать логику сервиса и приложения так чтобы:
 1. Сервис запомнил в своем объекта ключ и пути до файла с данными
 2. Приложение проверило бы след ситуации:
  1. .onRequest("?key=888")   - ответ сервиса  { status: 401, message: "authorization required" }- невернй ключ
  2. .onRequest("?key=123")   - ответ сервиса  { status: 200, message: "ok", data: [{ ... }] }- верный ключ, data - содержит все данные из файла
  3. .onRequest("?key=123&client_id=1")   - ответ сервиса  { status: 200, message: "ok", data: [{ ... }] }- верный ключ, data - содержит все данные из файла для клиента с соответствующим **client_id**, в случае если нет такого клиента вернуть пустой data
  4. .onRequest("?key=123&date=2021-01-01")   - ответ сервиса  { status: 200, message: "ok", data: [{ ... }] }- верный ключ, data - содержит все данные из файла для указанной даты, в случае если нет оплаты в тот день вернуть пустой data
  5. .onRequest("?key=123&method=visa)   - ответ сервиса  { status: 200, message: "ok", data: [{ ... }] }- верный ключ, data - содержит все данные из файла для выбранного метода оплаты, пустой data - в случае отсутствия
  6. *ОПЦИОНАЛЬНО - попробуйте следать так чтобы любая комбинация параметров поиска тоже срабатывала - например "?key=123&client_id=1&date=2021-01-01&method=visa

 
