## Обработка исключений. Пользовательские исключения

> Хотя имеющиеся в стандартной библиотеке классов Java классы исключений описывают большинство исключительных ситуаций, которые могут возникнуть при выполнении логики на основе стандартных классов, иногда требуется создать свои собственные классы исключений со своей логикой.

---

* Чтобы создать свой класс исключений, надо унаследовать его от класса Exception или от класса RuntimeException. Разница будет в том что в первом случае компилятор будет требовать логику "управления" в коде где может возникнуть исключения что мы придумали, а во втором случае - нет.


### [Часть 2]

* для того чтобы этот пример стал понятен, завершите [первую часть](../../structures/arrays/WEATHER.PROVIDER.ARR.CS.PART1.ru.md)

* Предположим что провайдер погоды (**WeatherProvider**) допускает погрешность присутствующую в данных о температуре в диапазоне +-2 градуса - даже вне границ (т е - условно допускается значение -152.0 .. +152.0 в качестве минимального / максимального значения), связанные с точностью аппаратов измерения. При этом провайдер хранит значения даже с этой погрешностью в свойствах **temperatureForToday** и **temperaturesFor10Days** (для сверки), но выдает приложению (консюмеру - **WeatherApplication**) только данные приведенные к диапазону -150.0 .. +150.0. то есть все методы выдачи и вычисления данных (**getTemperatureForToday()**, **getTemperaturesForecastFor10Days()**, **calculateAvgFor10Days()**, **getMaxTemperatureFor10Days()**, **getMinTemperatureFor10Days()**)  - в случае обнаружения значения выходящее не более чем на 2 градуса вне диапазона, приведут значение (откорректируют). 
 
   Например если метод **getTemperaturesForecastFor10Days()** перед выдачей массива обнаружит в ячейке  **temperaturesFor10Days[0]** значение ```-152.0``` передаст вместо этого значения для той ячейки ```-150.0```, ВНИМАНИЕ! при этом массив должен продолжать сохранять прежнее значение - ```-152.0```! Так же должны себя вести другие методы.

   Для реализации корректировки вы имеете право создать себе дополнительные методы!

* Для проверки логики, в формулу генерирования поменяйте коэффициент с **300** на **304** и выводите массив в оригинале а так же результат выдачи **getTemperaturesForecastFor10Days()**, сравните их. (ТАК КАК вероятность выдачи температуры вне диапазона мала, ~ 1%) вам придется попытаться 5-10 раз запустить код для получения такой погрешности! Чтобы долго не ждать такого момента, можете вынудить функцию генератор - во время теста всегда выдавать -152.0, а потом 152.0!
 
---

* Предположим очень редко возникает ситуация когда значения температуры может зашкалить за -152.0 .. +152.0, в таком случае провайдер уверен в том что данные некорректные и уже сам НЕ РЕШАЕТ вопрос путем поправления данных но дает "сигнал" в виде исключения дальше по цепочке, с той целью чтобы приложения (которое обращается к провайдеру) решала сама что ей в таком случае делать. Для этого:
  - Создайте класс собственного исключения **TemperatureDataOutOfRangeException**, наследника класса **Exception** 
  - Добавьте в во всех тех местах где методы провайдера пытались исправить ситуацию на +-2 градуса еще пару условий для ситуаций вне допустимого диапазона с поправкой ( < -152.0 ,   > +152.0 ) которые в случае возникновения таких значений "выбросят" исключение вашего класса наружу ( ```throw new TemperatureDataOutOfRangeException()``` )! При этом ТАК КАК вы не собираетесь обрабатывать исключения такого плана в самом провайдере, отметьте методы этим суфикосм ```throws TemperatureDataOutOfRangeException```.
  - При этом не забудьте о том что данные исключения должны достичь **WeatherApplication**.**printWeather()**

  
* Обновите логику **WeatherApplication** так чтобы в методе **printWeather()** перехватывалось исключение выброшенное провайдером (ипсользуя **try/catch**) и чтобы при возникновение неправильных температур вывод выглядел бы так

    ```
    ############# WEATHER #############

    We are sorry! 
    The data is unavailable!
    
    ###################################
    ``` 

---

БОНУС - какой тип исключения был использован в примере, Checked или Runtime ?